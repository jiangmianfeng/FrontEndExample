<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../css/index.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<section id="wrap">
    <div id="mask">
        <div class="up"></div>
        <div class="down"></div>
        <span class="line"></span>
    </div>
    <header id="head">
        <div class="headMain">
            <h1 class="logo">
                <img src="../img/logo.png" alt="logo">
            </h1>
            <div class="music">
                <audio src="../img/audio.mp3" loop  autoplay ></audio>
            </div>
            <nav class="nav">
                <ul class="list clearFix">
                    <li>
                        <a href="#">
                            <div class="up" >
                                <img src="../img/home.png" alt="home"/>
                            </div>
                            <div class="down">
                                <img  src="../img/home_gruen.png" alt="home"/>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Course</span>
                            <span class="down">Course</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Works</span>
                            <span class="down">Works</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">About</span>
                            <span class="down">About</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Team</span>
                            <span class="down">Team</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="arrow"></div>
        </div>
    </header>
    <section>
        <div id="content">
           <ul class="list">
               <li class="home">
                   <section>
                       <ul class="homeContent">
                           <li class="commonTitle active leftShow">
                               <div class="item">one layer</div>
                           </li>
                           <li class="commonTitle rightHide">
                               <div class="item">two layer</div>
                           </li>
                           <li class="commonTitle">
                               <div class="item">three layer</div>
                           </li>
                           <li class="commonTitle">
                               <div class="item">four layer</div>
                           </li>
                       </ul>
                       <ul class="homeCircle">
                           <li class="active"></li>
                           <li></li>
                           <li></li>
                           <li></li>
                       </ul>
                   </section>
               </li>
               <li class="course">
                   <section>
                       <div class="two">
                           <div class="title commonTitle">
                               <span>EINIGE</span><br/>
                               <span>UNSERER</span><br/>
                               <span>KUNDEN</span>
                           </div>
                           <div class="text commonText">
                               <p>Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit,
                                   gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                                   <br/>
                                   Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren,
                                   was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                               </p>
                           </div>
                           <div class="bottomRight">
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <div class="item">
                                    <div class="face"></div>
                                    <div class="backFace">魏小芳</div>
                                </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                           </div>
                       </div>
                       <div class="plane1"></div>
                       <div class="plane2"></div>
                       <div class="plane3"></div>
                   </section>
               </li>
               <li class="works">
                   <section>
                       <div class="three">
                           <div class="title commonTitle">
                               <span>EINBLICK</span><br/>
                               <span>ERKENNTNIS</span><br/>
                               <span>ERGEBNIS</span>
                           </div>
                           <div class="bottomDown">
                               <div class="item">
                                   <img src="../img/worksimg1.jpg"/>
                                   <div class="mark">
                                       <span>程序猿</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg2.jpg"/>
                                   <div class="mark">
                                       <span>魏晓芳</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg3.jpg"/>
                                   <div class="mark">
                                       <span>郭德纲</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg4.jpg"/>
                                   <div class="mark">
                                       <span>王腾飞</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                           </div>
                           <div class="robot">

                           </div>
                       </div>
                       <div class="pencel1"></div>
                       <div class="pencel2"></div>
                       <div class="pencel3"></div>
                   </section>
               </li>
               <li class="about">
                   <section>
                       <div class="aboutTitle commonTitle">
                           <span>DIE</span><br/>
                           <span>SPEZIELLE</span><br/>
                           <span>VIELFALT</span><br/>
                       </div>
                       <div class="aboutFooter commonText">
                           <p>
                               Der bunte Medienmix ist die Faszination die uns antreibt und das, was man an uns schätzt. Von A bis Z und von vorne bis hinten nehmen wir Ihr Projekt unter unsere Fittiche und lassen es zu etwas Großartigem heranwachsen.
                           </p>
                       </div>
                       <div class="aboutContent">
                           <div class="item aboutItemTop">
                                <span></span>
                                <ul data-src="../img/about1.jpg"></ul>
                           </div>
                           <div class="item aboutItemBottom">
                                <span></span>
                               <ul data-src="../img/about3.jpg"></ul>
                           </div>
                       </div>
                       <div class="aboutBackground">

                       </div>
                   </section>
               </li>
               <li class="team">
                   <section>
                       <div class="teamHeader commonTitle">
                           <span>WIR SIND</span><br/>
                           <span>VOXELAIR</span><br/>
                       </div>
                       <div class="teamText commonText">
                            <p>Wir sind seit 2002 eine Full-Service-Werbeagentur mit Stammsitz in Heimsheim, zwischen Stuttgart und Karlsruhe.</p>
                           <p>Über 60 Jahre Erfahrung vereinen das gesamte VoxelAir-Team. Dabei hat jedes Voxel neben professionellem Allroundwissen auch sein ganz spezielles Gebiet, um selbst die individuellsten Kundenwünsche schnell und kompetent umzusetzen.</p>
                       </div>
                       <div class="teamBottom">
                            <ul>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                                <li class="item"></li>
                            </ul>
                       </div>
                   </section>
               </li>
           </ul>
        </div>
        <div id="flexDot">
            <ul>
                <li class="item"></li>
                <li class="item"></li>
                <li class="item"></li>
                <li class="item"></li>
                <li class="item"></li>
            </ul>
        </div>
    </section>
</section>
</body>
<script type="text/javascript">
    window.onload=function () {
        var arrow=document.querySelector("#wrap #head .headMain .arrow");
       var liNodes=document.querySelectorAll("#wrap #head .headMain .nav .list li");
        var liUpNodes=document.querySelectorAll("#wrap #head .headMain .nav .list li .up");
       var firstLiNode=liNodes[0];
       var upLiNodes=firstLiNode.querySelector(".up");
        var content=document.querySelector("#content");
        var head=document.querySelector("#head");
        var contentLiNodes=document.querySelectorAll("#content .list >li");
        var listNodes=document.querySelector("#content .list");
        var homeContentNodes=document.querySelectorAll("#wrap #content .list .home .homeContent > li");
        var homeCircleNodes=document.querySelectorAll("#wrap #content .list .home .homeCircle li");
        var homeNodes=document.querySelector("#wrap #content .list .home");
        var aboutUlNodes=document.querySelectorAll("#wrap #content .list .about .aboutContent .item > ul");
        var dotNodes=document.querySelectorAll("#wrap #flexDot ul li ");
        
        var teamLiNodes=document.querySelectorAll("#wrap #content .list .team .teamBottom ul li");
        var teamBottom=document.querySelector("#wrap #content .list .team .teamBottom");
        var music = document.querySelector("#head > .headMain .music");
        var audio = document.querySelector("#head > .headMain .music audio");

        var mask=document.querySelector("#wrap #mask");
        var up=document.querySelector("#wrap #mask .up");
        var down=document.querySelector("#wrap #mask .down");
        var line=document.querySelector("#wrap #mask .line");
        var face=document.querySelectorAll("#wrap #mask div");
        var now=0;
        window.onresize=function(){
            contentBind();
            listNodes.style.top=-now*(document.documentElement.clientHeight-head.offsetHeight)+"px";
            arrow.style.left=liNodes[now].offsetLeft+liNodes[now].offsetWidth/2-arrow.offsetWidth/2+"px";
        };
        var timer=0;
        var oldIndex=0;
        var timer3D="0";
        var autoIndex=0;
        var preIndex=0;//上一屏
        loading();
        function loading() {
            var arr = ['bg1.jpg','bg2.jpg','bg3.jpg','bg4.jpg','bg5.jpg',
                'about1.jpg','about2.jpg','about3.jpg','about4.jpg','worksimg1.jpg','worksimg2.jpg',
                'worksimg3.jpg','worksimg4.jpg','team.png','greenLine.png'];
            var flag=0;
            for(var i=0;i<arr.length;i++){
                var img=new Image();
                img.src="../img/"+arr[i];
                img.onload=function () {
                    flag++;
                    line.style.width=flag/arr.length*100+"%";
                }
            }
            line.addEventListener("transitionend",function () {
                if(flag===arr.length){
                    for(var i=0;i<face.length;i++){
                        face[i].style.height=0+"px";
                    }
                    this.style.display="none"
                }
            });
            face[0].addEventListener("transitionend",function () {
               mask.remove();
               audio.play();
                home3D();
            });
        }
        //音频
        music.onclick=function(){
            if(audio.paused){
                audio.play();
                music.style.background ="url(../img/musicon.gif)";
            }else{
                audio.pause();
                music.style.background ="url(../img/musicoff.gif)";
            }
        };
        //出入场
        var arr=[
            {
               inAn:function(){
                   var homeContent=document.querySelector("#wrap #content .list .home .homeContent");
                   var homeCircle=document.querySelector("#wrap #content .list .home .homeCircle");
                   homeContent.style.transform="translateY(0px)";
                   homeCircle.style.transform="translateY(0px)";
                   homeContent.style.opacity=1;
                   homeCircle.style.opacity=1;
               },
                outAn:function () {
                    var homeContent=document.querySelector("#wrap #content .list .home .homeContent");
                    var homeCircle=document.querySelector("#wrap #content .list .home .homeCircle");
                    homeContent.style.transform="translateY(-400px)";
                    homeCircle.style.transform="translateY(100px)";
                    homeContent.style.opacity=0;
                    homeCircle.style.opacity=0;
                }
            },
            {
                inAn:function(){
                    var plane1 = document.querySelector("#content  .course .plane1");
                    var plane2 = document.querySelector("#content  .course .plane2");
                    var plane3 = document.querySelector("#content  .course .plane3");

                    plane1.style.transform = "translate(0px,0px)";
                    plane2.style.transform = "translate(0px,0px)";
                    plane3.style.transform = "translate(0px,0px)";
                },
                outAn:function () {
                    var plane1 = document.querySelector("#content  .course .plane1");
                    var plane2 = document.querySelector("#content  .course .plane2");
                    var plane3 = document.querySelector("#content  .course .plane3");

                    plane1.style.transform = "translate(-200px,-200px)";
                    plane2.style.transform = "translate(-200px,200px)";
                    plane3.style.transform = "translate(-200px,-200px)";
                }
            },
            {
                inAn:function(){
                    var pencel1 = document.querySelector("#content  .works .pencel1");
                    var pencel2 = document.querySelector("#content  .works .pencel2");
                    var pencel3 = document.querySelector("#content  .works .pencel3");

                    pencel1.style.transform = "translateY(0px)";
                    pencel2.style.transform = "translateY(0px)";
                    pencel3.style.transform = "translateY(0px)";
                },
                outAn:function () {
                    var pencel1 = document.querySelector("#content  .works .pencel1");
                    var pencel2 = document.querySelector("#content  .works .pencel2");
                    var pencel3 = document.querySelector("#content  .works .pencel3");

                    pencel1.style.transform = "translateY(-100px)";
                    pencel2.style.transform = "translateY(100px)";
                    pencel3.style.transform = "translateY(100px)";
                }
            },
            {
                inAn:function(){
                    var Rect1 = document.querySelector("#content > .list > .about .aboutContent > .aboutItemTop");
                    var Rect2 = document.querySelector("#content > .list > .about .aboutContent > .aboutItemBottom");

                    Rect1.style.transform = "rotate(0deg)";
                    Rect2.style.transform = "rotate(0deg)";
                },
                outAn:function () {
                    var Rect1 = document.querySelector("#content > .list > .about .aboutContent > .aboutItemTop");
                    var Rect2 = document.querySelector("#content > .list > .about .aboutContent > .aboutItemBottom");

                    Rect1.style.transform = "rotate(45deg)";
                    Rect2.style.transform = "rotate(-45deg)";
                }
            },
            {
                inAn:function(){
                    var Rect1 = document.querySelector("#content > .list > .team .teamHeader");
                    var Rect2 = document.querySelector("#content > .list > .team .teamText");

                    Rect1.style.transform = "translateX(0px)";
                    Rect2.style.transform = "translateX(0px)";
                },
                outAn:function () {
                    var Rect1 = document.querySelector("#content > .list > .team .teamHeader");
                    var Rect2 = document.querySelector("#content > .list > .team .teamText");

                    Rect1.style.transform = "translateX(-200px)";
                    Rect2.style.transform = "translateX(200px)";
                }
            }
        ];
        for(var i=0;i<arr.length;i++){
            arr[i]["outAn"]();
        }
        setTimeout(function(){
            arr[0].inAn();
        },2000);
//        arr[4].outAn();
//        setInterval(function () {
//            arr[4].inAn();
//        },2000);
        //第五屏气泡效果
        bubble();
        function bubble() {
            var oc=null;
            for(var i=0;i<teamLiNodes.length;i++){
                teamLiNodes[i].onmouseenter=function () {
                    for(var i=0;i<teamLiNodes.length;i++){
                        teamLiNodes[i].style.opacity=.2;
                    }
                    this.style.opacity=1;
                    addCanvas();
                    oc.style.left=this.offsetLeft+"px";
                };
            }
            function addCanvas() {
                if(!oc){
                    oc=document.createElement("canvas");
                    oc.width=teamLiNodes[0].offsetWidth;
                    oc.height=teamLiNodes[0].offsetHeight*2/3;
                    teamBottom.onmouseenter =function () {
                        for(var i=0;i<teamLiNodes.length;i++){
                            teamLiNodes[i].style.opacity=1;
                        }
                        removeCanvas();
                    };
                    teamBottom.appendChild(oc);
                    QiPao();
                }
            }
            function QiPao(){
                if(oc.getContext){
                    var ctx = oc.getContext("2d");
                    var arr=[];
                    //将数组中的圆绘制到画布上
                    time1=setInterval(function(){
                        ctx.clearRect(0,0,oc.width,oc.height);
                        //动画
                        for(var i=0;i<arr.length;i++){
                            arr[i].deg+=10;
                            arr[i].x = arr[i].startX +  Math.sin( arr[i].deg*Math.PI/180 )*arr[i].step*2;
                            arr[i].y = arr[i].startY - (arr[i].deg*Math.PI/180)*arr[i].step ;

                            if(arr[i].y <=50){
                                arr.splice(i,1)
                            }
                        }
                        //绘制
                        for(var i=0;i<arr.length;i++){
                            ctx.save();
                            ctx.fillStyle="rgba("+arr[i].red+","+arr[i].green+","+arr[i].blue+","+arr[i].alp+")";
                            ctx.beginPath();
                            ctx.arc(arr[i].x,arr[i].y,arr[i].r,0,2*Math.PI);
                            ctx.fill();
                            ctx.restore();
                        }
                    },1000/60);

                    //往arr中注入随机圆的信息
                    time2=setInterval(function(){
                        var r =Math.random()*6+2;
                        var x = Math.random()*oc.width;
                        var y = oc.height - r;
                        var red =   Math.round(Math.random()*255);
                        var green = Math.round(Math.random()*255);
                        var blue =  Math.round(Math.random()*255);
                        var alp = 1;


                        var deg =0;
                        var startX = x;
                        var startY = y;
                        //曲线的运动形式
                        var step =Math.random()*20+10;
                        arr.push({
                            x:x,
                            y:y,
                            r:r,
                            red:red,
                            green:green,
                            blue:blue,
                            alp:alp,
                            deg:deg,
                            startX:startX,
                            startY:startY,
                            step:step
                        })
                    },50)
                }
            }
            function removeCanvas(){
                oc.remove();
                oc=null;
                clearInterval(time1);
                clearInterval(time2);
            }
        }
        //第四屏图片炸裂
        picBoom();
        function picBoom() {
            for(var i=0;i<aboutUlNodes.length;i++){
                change(aboutUlNodes[i]);
            }
            function change(ul) {
                var src=ul.dataset.src;
                var w=ul.offsetWidth/2;
                var h=ul.offsetHeight/2;
                for(var i=0;i<4;i++){
                    var liNodes=document.createElement("li");
                    liNodes.style.width=w+"px";
                    liNodes.style.height=h+"px";
                    var imgNode=document.createElement("img");
                    imgNode.src=src;
                    /*
						1. left:0    top:0
						2. left:-w   top:0
						3. left:0    top:-h
						4. left:-w   top:-h
					*/
                    imgNode.style.left=-(i%2)*w+"px";
                    imgNode.style.top=-Math.floor(i/2)*h+"px";

                    liNodes.appendChild(imgNode);
                    ul.appendChild(liNodes);
                }
                ul.onmouseenter=function () {
//                    /*
//							1. left:0    top:0
//							2. left:-w   top:0
//							3. left:0    top:-h
//							4. left:-w   top:-h
//						*/
//                    /*
//                        1. left:0    top:h
//                        2. left:-2w   top:0
//                        3. left:w    top:-h
//                        4. left:-w   top:-2h
//
//                        var arrLeft=[0,-2,1,-1];
//                        var arrTop=[1,0,-1,-2];
//                    */
                    var imgNodes=this.querySelectorAll("li>img");
                    imgNodes[0].style.top=h+"px";
                    imgNodes[1].style.left=-2*w+"px";
                    imgNodes[2].style.left=w+"px";
                    imgNodes[3].style.top=-2*h+"px";
               };
               ul.onmouseleave=function () {
                   var imgNodes=this.querySelectorAll("li>img");
                   imgNodes[0].style.top=0+"px";
                   imgNodes[1].style.left=-w+"px";
                   imgNodes[2].style.left=0+"px";
                   imgNodes[3].style.top=-h+"px";
               }
            }
        }
        //home3D();
        function home3D() {
            for(var i=0;i<homeCircleNodes.length;i++){
                homeCircleNodes[i].index=i;
                homeCircleNodes[i].onclick=function () {
                    clearInterval(timer3D);
                    for(var i=0;i<homeCircleNodes.length;i++){
                        homeCircleNodes[i].classList.remove("active");
                    }
                    this.classList.add("active");
                    //从左往右  当前索引大于上一次索引  rightShow
                    if(this.index>oldIndex){
                        homeContentNodes[this.index].classList.add("rightShow");
                        homeContentNodes[this.index].classList.remove("rightHide");
                        homeContentNodes[this.index].classList.remove("leftShow");
                        homeContentNodes[this.index].classList.remove("leftHide");

                        homeContentNodes[oldIndex].classList.remove("rightShow");
                        homeContentNodes[oldIndex].classList.remove("rightHide");
                        homeContentNodes[oldIndex].classList.remove("leftShow");
                        homeContentNodes[oldIndex].classList.add("leftHide");
                    }
                    //从右往左  当前索引小于上一次索引 leftShow
                    if(this.index<oldIndex){
                        homeContentNodes[this.index].classList.add("leftShow");
                        homeContentNodes[this.index].classList.remove("rightHide");
                        homeContentNodes[this.index].classList.remove("rightShow");
                        homeContentNodes[this.index].classList.remove("leftHide");

                        homeContentNodes[oldIndex].classList.remove("rightShow");
                        homeContentNodes[oldIndex].classList.remove("leftHide");
                        homeContentNodes[oldIndex].classList.remove("leftShow");
                        homeContentNodes[oldIndex].classList.add("rightHide");
                    }
                    oldIndex=this.index;
                    //手动轮播  ---> 自动轮播的同步问题！！
                    //手动点完是需要自动轮播的，自动轮播从哪个面开始播？--->手动点的这个面开始自动轮播
                    //手动轮播的逻辑必须药告诉自动轮播 我刚刚点了哪一个面
                    autoIndex=this.index;
                    //move3D();
                }
            }
        }
        //自动轮播
        move3D();
        function move3D() {
            clearInterval(timer3D);
            timer3D=setInterval(function () {
                autoIndex++;
                if(autoIndex===homeContentNodes.length){
                    autoIndex=0;
                }
                for(var i=0;i<homeCircleNodes.length;i++){
                    homeCircleNodes[i].classList.remove("active");
                }
                homeCircleNodes[autoIndex].classList.add("active");
                //选择自右向左播放
                homeContentNodes[autoIndex].classList.add("rightShow");
                homeContentNodes[autoIndex].classList.remove("rightHide");
                homeContentNodes[autoIndex].classList.remove("leftShow");
                homeContentNodes[autoIndex].classList.remove("leftHide");

                homeContentNodes[oldIndex].classList.remove("rightShow");
                homeContentNodes[oldIndex].classList.remove("rightHide");
                homeContentNodes[oldIndex].classList.remove("leftShow");
                homeContentNodes[oldIndex].classList.add("leftHide");
                oldIndex=autoIndex;
            },2000)
        }
        homeNodes.onmouseenter=function(){
            clearInterval(timer3D);
        };
        homeNodes.onmouseleave=function() {
            move3D();
        };
        //滚轮滑动
        if(content.addEventListener){
            content.addEventListener("DOMMouseScroll",function (ev) {
                ev=ev||event;
                clearInterval(timer);
                timer=setTimeout(function () {
                    fn(ev);
                },200)
            });
        }
        content.onmousewheel=function (ev) {
            ev=ev||event;
            clearInterval(timer);
            timer=setTimeout(function () {
                fn(ev);
            },200)
        };
        function fn(ev) {
            ev=ev||event;
            var dir="";
            if(ev.wheelDelta){
                dir=ev.wheelDelta>0?"up":"down";
            }else if(ev.detail){
                dir=ev.detail<0?"up":"down";
            }
            preIndex=now;
            switch(dir){
                case"up":
                    if(now>0){
                        now--;
                        move(now);
                    }
                    break;
                case "down":
                    if(now<contentLiNodes.length-1){
                        now++;
                        move(now);
                    }
                    break;
            }
        }
       //内容布局
        contentBind();
        function contentBind() {
            content.style.height=document.documentElement.clientHeight-head.offsetHeight+"px";
            for(var i=0;i<contentLiNodes.length;i++){
                contentLiNodes[i].style.height=document.documentElement.clientHeight-head.offsetHeight+"px";
            }
        }
       //头部布局
        headBind();
       function headBind() {
           arrow.style.left=firstLiNode.offsetLeft+firstLiNode.offsetWidth/2-arrow.offsetWidth/2+"px";
           upLiNodes.style.width="100%";
           for(var i=0;i<liNodes.length;i++){
               liNodes[i].index=i;
               liNodes[i].onclick=function () {
                   preIndex=now;
                  move(this.index);
                   now = this.index;
               }
           }
           for(var i=0;i<dotNodes.length;i++){
               dotNodes[i].index=i;
               dotNodes[i].onclick=function () {
                   preIndex=now;
                   move(this.index);
                   now=this.index;
               }
           }
       }
        //move(0);
       function move(index) {
            for(var i=0;i<liUpNodes.length;i++){
                liUpNodes[i].style.width="";
            }
            arrow.style.left=liNodes[index].offsetLeft+liNodes[index].offsetWidth/2-arrow.offsetWidth/2+"px";
            liUpNodes[index].style.width="100%";
            listNodes.style.top=-index*(document.documentElement.clientHeight-head.offsetHeight)+"px";

            for(var i=0;i<dotNodes.length;i++){
                dotNodes[i].classList.remove("active");
            }
            dotNodes[index].classList.add("active");

           //出入场
           if(arr[index]&&typeof arr[index]["inAn"] === "function"){
               arr[index]["inAn"]();
           }
           if(arr[preIndex]&&typeof arr[preIndex]["inAn"] === "function"){
               arr[preIndex]["outAn"]();
           }
        }
    }
</script>
</html>