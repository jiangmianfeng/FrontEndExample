<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Title</title>
    <link href="../css/index.css" rel="stylesheet" type="text/css"/>
</head>
<body>
<section id="wrap">
    <header id="head">
        <div class="headMain">
            <h1 class="logo">
                <img src="../img/logo.png" alt="logo">
            </h1>
            <nav class="nav">
                <ul class="list clearFix">
                    <li>
                        <a href="#">
                            <div class="up" >
                                <img src="../img/home.png" alt="home"/>
                            </div>
                            <div class="down">
                                <img  src="../img/home_gruen.png" alt="home"/>
                            </div>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Course</span>
                            <span class="down">Course</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Works</span>
                            <span class="down">Works</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">About</span>
                            <span class="down">About</span>
                        </a>
                    </li>
                    <li>
                        <a href="#">
                            <span class="up">Team</span>
                            <span class="down">Team</span>
                        </a>
                    </li>
                </ul>
            </nav>
            <div class="arrow"></div>
        </div>
    </header>
    <section>
        <div id="content">
           <ul class="list">
               <li class="home">
                   <section>
                       <ul class="homeContent">
                           <li class="commonTitle active leftShow">
                               <div class="item">one layer</div>
                           </li>
                           <li class="commonTitle rightHide">
                               <div class="item">two layer</div>
                           </li>
                           <li class="commonTitle">
                               <div class="item">three layer</div>
                           </li>
                           <li class="commonTitle">
                               <div class="item">four layer</div>
                           </li>
                       </ul>
                       <ul class="homeCircle">
                           <li class="active"></li>
                           <li></li>
                           <li></li>
                           <li></li>
                       </ul>
                   </section>
               </li>
               <li class="course">
                   <section>
                       <div class="two">
                           <div class="title commonTitle">
                               <span>EINIGE</span><br/>
                               <span>UNSERER</span><br/>
                               <span>KUNDEN</span>
                           </div>
                           <div class="text commonText">
                               <p>Das Kundenvertrauen in unsere Kompetenz ist die notwendige Basis einer erfolgreichen Zusammenarbeit,
                                   gleichzeitig aber auch das größte Lob, das man uns entgegenbringen kann.
                                   <br/>
                                   Diese und viele weitere große und kleine Kunden vertrauen uns seit Jahren,
                                   was uns stolz macht, und dafür sagen wir an dieser Stelle einfach mal.
                               </p>
                           </div>
                           <div class="bottomRight">
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <span class="line"></span>
                                <div class="item">
                                    <div class="face"></div>
                                    <div class="backFace">魏小芳</div>
                                </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                               <div class="item">
                                   <div class="face"></div>
                                   <div class="backFace">魏小芳</div>
                               </div>
                           </div>
                       </div>
                   </section>
               </li>
               <li class="works">
                   <section>
                       <div class="three">
                           <div class="title commonTitle">
                               <span>EINBLICK</span><br/>
                               <span>ERKENNTNIS</span><br/>
                               <span>ERGEBNIS</span>
                           </div>
                           <div class="bottomDown">
                               <div class="item">
                                   <img src="../img/worksimg1.jpg"/>
                                   <div class="mark">
                                       <span>程序猿</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg2.jpg"/>
                                   <div class="mark">
                                       <span>魏晓芳</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg3.jpg"/>
                                   <div class="mark">
                                       <span>郭德纲</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                               <div class="item">
                                   <img src="../img/worksimg4.jpg"/>
                                   <div class="mark">
                                       <span>王腾飞</span>
                                       <div class="icon">
                                       </div>
                                   </div>
                               </div>
                           </div>
                           <div class="robot">

                           </div>
                       </div>
                   </section>
               </li>
               <li class="about">
                   <section>About</section>
               </li>
               <li class="team">
                   <section>Team</section>
               </li>
           </ul>
        </div>
    </section>
</section>
</body>
<script type="text/javascript">
    window.onload=function () {
        var arrow=document.querySelector("#wrap #head .headMain .arrow");
       var liNodes=document.querySelectorAll("#wrap #head .headMain .nav .list li");
        var liUpNodes=document.querySelectorAll("#wrap #head .headMain .nav .list li .up");
       var firstLiNode=liNodes[0];
       var upLiNodes=firstLiNode.querySelector(".up");
        var content=document.querySelector("#content");
        var head=document.querySelector("#head");
        var contentLiNodes=document.querySelectorAll("#content .list >li");
        var listNodes=document.querySelector("#content .list");
        var homeContentNodes=document.querySelectorAll("#wrap #content .list .home .homeContent > li");
        var homeCircleNodes=document.querySelectorAll("#wrap #content .list .home .homeCircle li");
        var homeNodes=document.querySelector("#wrap #content .list .home");
        var now=0;
        window.onresize=function(){
            contentBind();
            listNodes.style.top=-now*(document.documentElement.clientHeight-head.offsetHeight)+"px";
            arrow.style.left=liNodes[now].offsetLeft+liNodes[now].offsetWidth/2-arrow.offsetWidth/2+"px";
        };
        var timer=0;

        var oldIndex=0;
        var timer3D="0";
        var autoIndex=0;
        home3D();
        function home3D() {
            for(var i=0;i<homeCircleNodes.length;i++){
                homeCircleNodes[i].index=i;
                homeCircleNodes[i].onclick=function () {
                    clearInterval(timer3D);
                    for(var i=0;i<homeCircleNodes.length;i++){
                        homeCircleNodes[i].classList.remove("active");
                    }
                    this.classList.add("active");
                    //从左往右  当前索引大于上一次索引  rightShow
                    if(this.index>oldIndex){
                        homeContentNodes[this.index].classList.add("rightShow");
                        homeContentNodes[this.index].classList.remove("rightHide");
                        homeContentNodes[this.index].classList.remove("leftShow");
                        homeContentNodes[this.index].classList.remove("leftHide");

                        homeContentNodes[oldIndex].classList.remove("rightShow");
                        homeContentNodes[oldIndex].classList.remove("rightHide");
                        homeContentNodes[oldIndex].classList.remove("leftShow");
                        homeContentNodes[oldIndex].classList.add("leftHide");
                    }
                    //从右往左  当前索引小于上一次索引 leftShow
                    if(this.index<oldIndex){
                        homeContentNodes[this.index].classList.add("leftShow");
                        homeContentNodes[this.index].classList.remove("rightHide");
                        homeContentNodes[this.index].classList.remove("rightShow");
                        homeContentNodes[this.index].classList.remove("leftHide");

                        homeContentNodes[oldIndex].classList.remove("rightShow");
                        homeContentNodes[oldIndex].classList.remove("leftHide");
                        homeContentNodes[oldIndex].classList.remove("leftShow");
                        homeContentNodes[oldIndex].classList.add("rightHide");
                    }
                    oldIndex=this.index;
                    //手动轮播  ---> 自动轮播的同步问题！！
                    //手动点完是需要自动轮播的，自动轮播从哪个面开始播？--->手动点的这个面开始自动轮播
                    //手动轮播的逻辑必须药告诉自动轮播 我刚刚点了哪一个面
                    autoIndex=this.index;
                    //move3D();
                }
            }
        }
        //自动轮播
        move3D();
        function move3D() {
            clearInterval(timer3D);
            timer3D=setInterval(function () {
                autoIndex++;
                if(autoIndex===homeContentNodes.length){
                    autoIndex=0;
                }
                for(var i=0;i<homeCircleNodes.length;i++){
                    homeCircleNodes[i].classList.remove("active");
                }
                homeCircleNodes[autoIndex].classList.add("active");
                //选择自右向左播放
                homeContentNodes[autoIndex].classList.add("rightShow");
                homeContentNodes[autoIndex].classList.remove("rightHide");
                homeContentNodes[autoIndex].classList.remove("leftShow");
                homeContentNodes[autoIndex].classList.remove("leftHide");

                homeContentNodes[oldIndex].classList.remove("rightShow");
                homeContentNodes[oldIndex].classList.remove("rightHide");
                homeContentNodes[oldIndex].classList.remove("leftShow");
                homeContentNodes[oldIndex].classList.add("leftHide");
                oldIndex=autoIndex;
            },2000)
        }
        homeNodes.onmouseenter=function(){
            clearInterval(timer3D);
        };

        homeNodes.onmouseleave=function() {
            move3D();
        };
        //滚轮滑动
        if(content.addEventListener){
            content.addEventListener("DOMMouseScroll",function (ev) {
                ev=ev||event;
                clearInterval(timer);
                timer=setTimeout(function () {
                    fn(ev);
                },200)
            });
        }
        content.onmousewheel=function (ev) {
            ev=ev||event;
            clearInterval(timer);
            timer=setTimeout(function () {
                fn(ev);
            },200)
        };
        function fn(ev) {
            ev=ev||event;
            var dir="";
            if(ev.wheelDelta){
                dir=ev.wheelDelta>0?"up":"down";
            }else if(ev.detail){
                dir=ev.detail<0?"up":"down";
            }
            switch(dir){
                case"up":
                    if(now>0){
                        now--;
                        move(now);
                    }
                    break;
                case "down":
                    if(now<contentLiNodes.length-1){
                        now++;
                        move(now);
                    }
                    break;
            }
        }
       //内容布局
        contentBind();
        function contentBind() {
            content.style.height=document.documentElement.clientHeight-head.offsetHeight+"px";
            for(var i=0;i<contentLiNodes.length;i++){
                contentLiNodes[i].style.height=document.documentElement.clientHeight-head.offsetHeight+"px";
            }
        }
       //头部布局
        headBind();
       function headBind() {
           arrow.style.left=firstLiNode.offsetLeft+firstLiNode.offsetWidth/2-arrow.offsetWidth/2+"px";
           upLiNodes.style.width="100%";
           for(var i=0;i<liNodes.length;i++){
               liNodes[i].index=i;
               liNodes[i].onclick=function () {
                  move(this.index);
                   now = this.index;
               }
           }
       }
        move(0);
       function move(index) {
            for(var i=0;i<liUpNodes.length;i++){
                liUpNodes[i].style.width="";
            }
            arrow.style.left=liNodes[index].offsetLeft+liNodes[index].offsetWidth/2-arrow.offsetWidth/2+"px";
            liUpNodes[index].style.width="100%";
            listNodes.style.top=-index*(document.documentElement.clientHeight-head.offsetHeight)+"px";
        }
    }
</script>
</html>